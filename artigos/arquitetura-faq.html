<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Marco Tulio Valente" />
  <title>Perguntas Frequentes sobre Arquitetura de Software ‚Äì Engenharia de Software Moderna</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: 1;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    q { quotes: "‚Äú" "‚Äù" "‚Äò" "‚Äô"; }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-RGYNKH464F"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-RGYNKH464F');
  </script>

  <style>
  .dark-mode {
    background-color: black;
    color: white;
  }
  .dark-mode code {
    background-color: black;
    color: white;
  }    
  </style>

  <link rel="shortcut icon" type="image/x-icon" href="https://engsoftmoderna.info/figs/favicon.ico">

  <link rel="stylesheet" href="https://engsoftmoderna.info/helper/mini-default.min.css">

  <link rel="stylesheet" href="https://engsoftmoderna.info/helper/engsoftmoderna.css">

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="container">
<div class="row cols-sm-12 col-md-8 col-lg-6">
<div class="col-md-offset-1 col-lg-offset-3">

<p>
<a href="https://engsoftmoderna.info">
<img src="https://engsoftmoderna.info/figs/capa/capa-3d.jpg"></a>
</p>

<p>
<a href="https://engsoftmoderna.info">P√°gina principal do livro</a>
</p>

<p>Compre na

<a href="https://www.amazon.com.br/gp/product/6500019504">Amazon</a>, 

<a href="https://www.submarino.com.br/produto/1768283036/engenharia-de-software-moderna">
      Submarino</a> ou 

<a href="https://loja.umlivro.com.br/engenharia-de-software-moderna-4778188/p">
      UmLivro</a>
</p>

<p>
Veja tamb√©m os cursos de extens√£o a dist√¢ncia 
<a href="http://www.engsoftmoderna.dcc.ufmg.br">Engenharia de Software Moderna</a> (48 horas) e
<a href="http://www.testesoft.dcc.ufmg.br">Teste de Software</a> (20 horas), oferecidos pelo DCC/ICEX/UFMG.</p>

<header id="title-block-header">
<h1 class="title">Engenharia de Software Moderna</h1>
<p class="author">Marco Tulio Valente</p>
</header>
<h1 class="unnumbered"
id="perguntas-frequentes-sobre-arquitetura-de-software">Perguntas
Frequentes sobre Arquitetura de Software <a
href="#perguntas-frequentes-sobre-arquitetura-de-software"
class="anchor-link" aria-hidden="true">üîó</a></h1>
<p>Neste artigo, respondemos perguntas sobre temas relacionados com
arquitetura de software e que n√£o s√£o abordados no <a
href="../cap7.html">Cap√≠tulo 7</a> do livro.</p>
<p>Segue a lista atual de perguntas:</p>
<ol type="1">
<li><a href="#o-que-%C3%A9-uma-camada-de-dom%C3%ADnio">O que √© uma
camada de dom√≠nio?</a></li>
<li><a href="#o-que-%C3%A9-um-sistema-multi-tenant">O que √© um sistema
multi-tenant?</a></li>
<li><a href="#o-que-%C3%A9-um-servidor-stateless">O que √© um servidor
stateless?</a></li>
<li><a href="#o-que-%C3%A9-o-teorema-cap">O que √© o Teorema
CAP?</a></li>
<li><a href="#o-que-%C3%A9-o-padr%C3%A3o-strangler-fig">O que √© o padr√£o
Strangler Fig?</a></li>
<li><a href="#o-que-%C3%A9-um-orquestrador">O que √© um
orquestrador?</a></li>
</ol>
<hr />
<h3 class="unnumbered" id="o-que-√©-uma-camada-de-dom√≠nio">1. O que √© uma
camada de dom√≠nio? <a href="#o-que-√©-uma-camada-de-dom√≠nio"
class="anchor-link" aria-hidden="true">üîó</a></h3>
<p>Esse termo, na pr√°tica, √© usado para referenciar a camada de um
sistema que trata da sua l√≥gica de neg√≥cio. Por exemplo, se um sistema
seguir uma <a
href="../cap7.html#arquitetura-em-tr%C3%AAs-camadas">arquitetura com
tr√™s camadas</a>, o dom√≠nio corresponde √† camada do meio. Isto √©, a
camada que fica entre a camada de interface com o usu√°rio e a camada de
persist√™ncia.</p>
<p>Muitas vezes, usa-se tamb√©m o termo <strong>modelo de
dom√≠nio</strong> (<em>domain model</em>), principalmente quando queremos
focar no projeto da camada de dom√≠nio, por exemplo, quando queremos
ressaltar quais s√£o as suas principais classes e interfaces.</p>
<p>Se quiser saber mais sobre o camadas e modelos de dom√≠nio, voc√™ pode
consultar nosso artigo sobre <a href="./ddd.html">Domain-Driven Design
(DDD)</a>.</p>
<h3 class="unnumbered" id="o-que-√©-um-sistema-multi-tenant">2. O que √©
um sistema multi-tenant? <a href="#o-que-√©-um-sistema-multi-tenant"
class="anchor-link" aria-hidden="true">üîó</a></h3>
<p>Um sistema multi-tenant (<q>multi-inquilino</q>) √© aquele que pode
atender simultaneamente a diversos clientes. Por exemplo, suponha que
voc√™ desenvolve um sistema para controle acad√™mico de escolas. Ent√£o,
naturalmente, voc√™ quer atender a diversas escolas, as quais v√£o pagar
uma assinatura mensal para uso do seu sistema. Por√©m, voc√™ gostaria
tamb√©m de desenvolver, manter e colocar em produ√ß√£o uma √∫nica inst√¢ncia
do sistema, a qual ser√° acessada por todas as escolas. Quando isso
ocorre, dizemos que o sistema possui uma arquitetura multi-tenant.</p>
<p>Por outro lado, se voc√™ tiver que manter inst√¢ncias de execu√ß√£o
diferentes para cada cliente, o seu sistema √© single-tenant.</p>
<p>Por que o conceito de multi-tenant √© importante? Em muitos casos, √©
f√°cil perceber que um sistema, desde o primeiro dia, dever√° ser
multi-tenant. No entanto, em outros casos, isso n√£o √© t√£o claro. Por
isso, quando for planejar a arquitetura de um sistema, sempre vale a
pena avaliar a ado√ß√£o de uma solu√ß√£o multi-tenant, mesmo que ela n√£o
seja necess√°ria nos seus primeiros anos de vida.</p>
<p>Arquiteturas multi-tenant s√£o apenas √∫teis em sistemas SaaS
(<q>Software as a Service</q>)? N√£o necessariamente. Um exemplo √© o
Stack Overflow, que al√©m do site principal, possui outros sites de
perguntas e respostas, por exemplo sobre Matem√°tica, Estat√≠stica, Teoria
da Computa√ß√£o, Engenharia de Software, etc. No entanto, as perguntas e
respostas de todos eles s√£o tratadas pela mesma inst√¢ncia do
sistema.</p>
<h3 class="unnumbered" id="o-que-√©-um-servidor-stateless">3. O que √© um
servidor stateless? <a href="#o-que-√©-um-servidor-stateless"
class="anchor-link" aria-hidden="true">üîó</a></h3>
<p>Antes de responder, √© importante explicar que esse conceito se aplica
a aplica√ß√µes distribu√≠das constru√≠das de acordo com uma arquitetura
cliente/servidor. Mais especificamente, aos servidores de tais
aplica√ß√µes.</p>
<p>Dizemos que um servidor √© stateless quando ele n√£o armazena qualquer
informa√ß√£o sobre o estado de seus clientes. Consequentemente, as
requisi√ß√µes dos clientes devem incluir todas as informa√ß√µes necess√°rias
para o seu devido processamento pelo servidor.</p>
<p>Recomenda-se, por exemplo, que aplica√ß√µes Web sejam stateless. Os
motivos s√£o pelo menos os seguintes: escalabilidade e confiabilidade, as
quais s√£o propriedades mais f√°ceis de serem conseguidas quando os
servidores s√£o stateless. A confiabilidade dos servidores melhora pelo
simples fato de eles n√£o terem que restaurar qualquer informa√ß√£o sobre
os clientes ap√≥s uma poss√≠vel falha ou queda. A escalabilidade aumenta
pelo fato de eles n√£o precisarem armazenar nada sobre seus clientes. Por
exemplo, ap√≥s atender a uma requisi√ß√£o pode-se liberar todos os recursos
que foram alocados durante o seu processamento.</p>
<h3 class="unnumbered" id="o-que-√©-o-teorema-cap">4. O que √© o Teorema
CAP? <a href="#o-que-√©-o-teorema-cap" class="anchor-link"
aria-hidden="true">üîó</a></h3>
<p>Esse teorema, conforme proposto por Eric Brewer, trata de cen√°rios
envolvendo bancos de dados distribu√≠dos, como √© comum, por exemplo, em
arquiteturas baseadas em <a
href="../cap7.html#microsservi%C3%A7os">microsservi√ßos</a>.</p>
<p>Nesses cen√°rios, sempre vai haver parti√ß√µes (P) entre os bancos de
dados (BD). Por exemplo, suponha dois BDs, A e B, localizados em seus
seus respectivos microsservi√ßos. Logo, um problema de rede, pode fazer
com que A n√£o consiga se comunicar com B ou vice-versa.</p>
<p>Assumindo que parti√ß√µes v√£o ocorrer, o teorema CAP, de forma
simplificada, diz que arquitetos de sistemas distribu√≠dos t√™m que fazer
uma escolha:</p>
<ul>
<li><p>Priorizar disponibilidade (<em>availabliliy</em> ou A), abrindo
m√£o de consist√™ncia (C), pelo menos em certos casos. Explicando melhor,
suponha que a vers√£o mais nova de um dado est√° em A, mas uma parti√ß√£o na
rede impede que ela seja propagada para B. Como o primeiro objetivo √©
disponibilidade, o sistema vai entregar para os clientes de B a vers√£o
desatualizada do dado.</p></li>
<li><p>Priorizar consist√™ncia (C) e abrir m√£o, quando for inevit√°vel, de
disponibilidade (A). O motivo √© que para garantir consist√™ncia temos que
adotar um protocolo (ou algoritmo) para propagar dados de A para B e
vice-versa. Isto √©, esse protocolo vai manter os dois BDs sincronizados.
Mas, para isso, ele tem que <q>travar</q> um BD quando o outro n√£o
estiver dispon√≠vel. Consequentemente, o BD travado n√£o vai responder
requisi√ß√µes de seus clientes para n√£o entregar dados desatualizados ou
inconsistentes.</p></li>
</ul>
<p>Em resumo, o Teorema CAP afirma que, em um sistema com BDs
distribu√≠dos, vamos sempre ter parti√ß√µes de comunica√ß√£o (P). Por isso,
ao definir uma arquitetura distribu√≠da, temos que fazer uma escolha:
priorizar consist√™ncia (C) ou disponibilidade (A). Portanto, sistemas
com dados distribu√≠dos s√£o AP ou CP, mas nunca CAP.</p>
<p>Sempre que poss√≠vel, devemos optar por sistemas AP, pois eles s√£o
mais f√°ceis de implementar e s√£o tamb√©m mais escal√°veis. Por outro lado,
em alguns cen√°rios n√£o podemos prescindir de consist√™ncia, como pode ser
o caso de sistemas banc√°rios e financeiros.</p>
<h3 class="unnumbered" id="o-que-√©-o-padr√£o-strangler-fig">5. O que √© o
padr√£o Strangler Fig? <a href="#o-que-√©-o-padr√£o-strangler-fig"
class="anchor-link" aria-hidden="true">üîó</a></h3>
<p>Strangler Fig √© um padr√£o para migra√ß√£o de sistemas legados para uma
nova tecnologia ou arquitetura. Especificamente, quando precisamos
<q>aposentar</q> um sistema X, podemos fazer isso de duas maneiras:</p>
<ul>
<li><p>De uma s√≥ vez, isto √©, podemos implementar um sistema substituto
Y e ent√£o, em uma data definida, desligar X e ativar Y. Evidentemente,
os riscos dessa <q>virada √∫nica de chave</q> costumam ser
altos.</p></li>
<li><p>De forma gradativa. Por exemplo, suponha que o sistema X
implementa funcionalidades X1, X2,‚Ä¶, Xn. Ent√£o, iremos implementar
gradativamente funcionalidades equivalentes Y1, Y2,‚Ä¶, Yn, as quais ser√£o
ativadas de forma tamb√©m gradual. Por exemplo, em um determinado
momento, o sistema poder√° ter a seguinte configura√ß√£o:</p>
<p>[Y1, Y2, Y3] [X4, X5, .., Xn].</p>
<p>Ou seja, nesse momento da migra√ß√£o, Y1, Y2 e Y3 j√° s√£o
funcionalidades desenvolvidas na nova tecnologia ou arquitetura e X4 a
Xn ainda est√£o na vers√£o legada.</p></li>
</ul>
<p>O padr√£o de migra√ß√£o gradual, que comentamos acima, √© chamado de
<strong>Strangler Fig</strong>, pois a nova tecnologia ou arquitetura
vai gradativamente <q>estrangulando</q> o sistema legado. O nome,
proposto por Martin Fowler, √© inspirado em um tipo espec√≠fico de
figueira, isto √©, a √°rvore que produz a fruta figo. Dentre as v√°rias
esp√©cies de figueira, existe uma que cresce em volta de uma √°rvore
hospedeira e que vai gradativamente estrangulando-a. Voc√™ pode ver
algumas fotos desse tipo de figueira na <a
href="https://en.wikipedia.org/wiki/Strangler_fig">Wikip√©dia</a>.</p>
<p>Strangler Fig pode ser √∫til, por exemplo, quando planejamos migrar um
monolito para uma arquitetura baseada em microsservi√ßos. O padr√£o,
tamb√©m nesse caso, advoga que a migra√ß√£o deve ser gradual, isto √©, um
microsservi√ßo de cada vez.</p>
<h3 class="unnumbered" id="o-que-√©-um-orquestrador">6. O que √© um
orquestrador? <a href="#o-que-√©-um-orquestrador" class="anchor-link"
aria-hidden="true">üîó</a></h3>
<p>Frequentemente, uma opera√ß√£o de neg√≥cio deve ser executada em
m√∫ltiplos servi√ßos ou microsservi√ßos. Nesse contexto, chama-se de
<strong>orquestrador</strong> o m√≥dulo que dispara essa execu√ß√£o e
monitora os seus resultados.</p>
<p>Por exemplo, suponha que para cadastrar um aluno em uma faculdade
temos que cadastr√°-lo em dois sistemas: acad√™mico e financeiro. O
programa respons√°vel por disparar esses dois cadastros, monitorar se
eles foram conclu√≠dos com sucesso e tratar eventuais erros √© chamado
ent√£o de orquestrador da opera√ß√£o de cadastro de alunos.</p>
<hr />
<p>Voltar para a <a href="../index.html">p√°gina principal</a>.</p>
<button onclick="darkMode()">Modo noturno</button>

<script>
function darkMode() {
   var element = document.body;
   element.classList.toggle("dark-mode");
}
</script>

</div>
</div>
</div>

<footer>
Direitos autorais reservados. Vers√£o para uso pessoal.
Para reportar quaisquer erros, incluindo pequenos erros de ortografia, use este <a href="https://forms.gle/KbzvMx5RLnqPR7uq7">formul√°rio</a>.
</footer>
</body>
</html>
