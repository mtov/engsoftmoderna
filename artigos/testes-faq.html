<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Marco Tulio Valente" />
  <title>Perguntas Frequentes sobre Testes de Software â€“ Engenharia de Software Moderna</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    q { quotes: "â€œ" "â€" "â€˜" "â€™"; }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-8249107-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-8249107-3', {'anonymize_ip': true});
  </script>

  <script>
  var trackOutboundLink = function(url, action, category) {
      gtag('event', action, {
        'event_category': category,
        'event_label': url,
        'transport_type': 'beacon',
        'event_callback': function(){document.location = url;}
      });
  }
  </script>

  <link rel="shortcut icon" type="image/x-icon" href="https://engsoftmoderna.info/figs/favicon.ico">

  <link rel="stylesheet" href="https://engsoftmoderna.info/helper/mini-default.min.css">

  <link rel="stylesheet" href="https://engsoftmoderna.info/helper/engsoftmoderna.css">

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="container">
<div class="row cols-sm-12 col-md-8 col-lg-6">
<div class="col-md-offset-1 col-lg-offset-3">

<p>
<a href="https://engsoftmoderna.info">
<img src="https://engsoftmoderna.info/figs/capa/capa-3d.jpg"></a>
</p>

<p>
<a href="https://engsoftmoderna.info">PÃ¡gina principal do livro</a>
</p>

<p>Compre na

<a href="https://www.amazon.com.br/gp/product/6500019504">Amazon</a>, 

<a href="https://www.submarino.com.br/produto/1768283036/engenharia-de-software-moderna">
      Submarino</a> ou 

<a href="https://loja.umlivro.com.br/engenharia-de-software-moderna-4778188/p">
      UmLivro</a>
</p>

<p>
Veja tambÃ©m os cursos de extensÃ£o a distÃ¢ncia 
<a href="http://www.engsoftmoderna.dcc.ufmg.br">Engenharia de Software Moderna</a> (48 horas) e
<a href="http://www.testesoft.dcc.ufmg.br">Teste de Software</a> (20 horas), oferecidos pelo DCC/ICEX/UFMG.</p>

<header id="title-block-header">
<h1 class="title">Engenharia de Software Moderna</h1>
<p class="author">Marco Tulio Valente</p>
</header>
<h1 class="unnumbered" id="perguntas-frequentes-sobre-testes">Perguntas
Frequentes sobre Testes <a href="#perguntas-frequentes-sobre-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h1>
<p>O objetivo deste artigo Ã© responder algumas perguntas frequentes que
sÃ£o feitas sobre o <a href="../cap8.html">CapÃ­tulo 8</a> do livro. No
entanto, estamos interessados apenas em perguntas conceituais,
principalmente sobre os trÃªs tipos de testes abordados no capÃ­tulo:
<strong>unidade, integraÃ§Ã£o e sistema</strong>. TambÃ©m, nÃ£o pretendemos
abordar questÃµes especÃ­ficas de um framework de testes ou de qualquer
outra tecnologia.</p>
<p>A lista atual de perguntas estÃ¡ organizada em quatro grandes
temas:</p>
<h5 class="unnumbered"
id="perguntas-sobre-conceitos-de-testes">Perguntas sobre conceitos de
testes <a href="#perguntas-sobre-conceitos-de-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h5>
<ol type="1">
<li><a href="#o-certo-%C3%A9-teste-de-unidade-ou-teste-unit%C3%A1rio">O
certo Ã© teste de unidade ou teste unitÃ¡rio?</a></li>
<li><a href="#o-que-%C3%A9-uma-unidade">O que Ã© uma unidade?</a></li>
<li><a
href="#no-contexto-de-testes-o-que-significam-os-termos-falso-positivonegativo-e-verdadeiro-positivonegativo">No
contexto de testes, o que significam os termos falso positivo/negativo e
verdadeiro positivo/negativo?</a></li>
<li><a
href="#por-que-n%C3%A3o-usam-o-termo-dubl%C3%AA-de-testes-no-livro">Por
que nÃ£o usam o termo dublÃª de testes no livro?</a></li>
</ol>
<h5 class="unnumbered"
id="perguntas-sobre-a-escrita-de-testes">Perguntas sobre a escrita de
testes <a href="#perguntas-sobre-a-escrita-de-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h5>
<ol start="5" type="1">
<li><a href="#precisamos-testar-m%C3%A9todos-privados">Precisamos testar
mÃ©todos privados?</a></li>
<li><a
href="#como-testar-m%C3%A9todos-que-t%C3%AAm-efeito-colateral">Como
testar mÃ©todos que tÃªm efeito colateral?</a></li>
<li><a
href="#como-testar-m%C3%A9todos-que-n%C3%A3o-t%C3%AAm-efeito-colateral">Como
testar mÃ©todos que nÃ£o tÃªm efeito colateral?</a></li>
<li><a
href="#quando-preciso-criar-um-mock-para-uma-depend%C3%AAncia">Quando
preciso criar um mock para uma dependÃªncia?</a></li>
<li><a href="#como-criar-um-mock-para-uma-depend%C3%AAncia-privada">Como
criar um mock para uma dependÃªncia privada?</a></li>
<li><a
href="#em-qual-pacote-ou-m%C3%B3dulo-ou-diret%C3%B3rio-devo-colocar-os-testes">Em
qual pacote (ou mÃ³dulo, ou diretÃ³rio) devo colocar os testes?</a></li>
</ol>
<h5 class="unnumbered"
id="perguntas-sobre-a-execuÃ§Ã£o-de-testes">Perguntas sobre a execuÃ§Ã£o de
testes <a href="#perguntas-sobre-a-execuÃ§Ã£o-de-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h5>
<ol start="11" type="1">
<li><a href="#com-que-frequ%C3%AAncia-devemos-rodar-os-testes">Com que
frequÃªncia devemos rodar os testes?</a></li>
<li><a
href="#quais-testes-devem-ser-rodados-por-um-servidor-de-integra%C3%A7%C3%A3o-cont%C3%ADnua-ci">Quais
testes devem ser rodados por um servidor de IntegraÃ§Ã£o ContÃ­nua
(CI)?</a></li>
<li><a href="#para-que-servem-su%C3%ADtes-de-testes">Para que servem
suÃ­tes de testes?</a></li>
</ol>
<h5 class="unnumbered"
id="perguntas-sobre-outros-tipos-de-testes">Perguntas sobre outros tipos
de testes <a href="#perguntas-sobre-outros-tipos-de-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h5>
<ol start="14" type="1">
<li><a href="#o-que-%C3%A9-um-teste-de-fuma%C3%A7a-smoke-test">O que Ã©
um teste de fumaÃ§a (smoke test)?</a></li>
<li><a href="#o-que-%C3%A9-um-teste-de-snapshot">O que Ã© um teste de
snapshot?</a></li>
</ol>
<p>Segue a lista de perguntas e suas respostas.</p>
<hr />
<h3 class="unnumbered"
id="o-certo-Ã©-teste-de-unidade-ou-teste-unitÃ¡rio">1. O certo Ã© teste de
unidade ou teste unitÃ¡rio? <a
href="#o-certo-Ã©-teste-de-unidade-ou-teste-unitÃ¡rio" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h3>
<p>Os dois termos sÃ£o usados. EntÃ£o, assumindo que a lÃ­ngua Ã© uma
entidade viva e dinÃ¢mica, nÃ£o consideramos errado usar qualquer um
deles. Dito isso, preferimos teste de unidade, porque teste unitÃ¡rio
pode passar a ideia errada de que temos um Ãºnico teste no sistema.</p>
<h3 class="unnumbered" id="o-que-Ã©-uma-unidade">2. O que Ã© uma unidade?
<a href="#o-que-Ã©-uma-unidade" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h3>
<p>No contexto de testes de unidade, a definiÃ§Ã£o de unidade nÃ£o Ã©
totalmente objetiva. Tendemos a dizer que uma unidade Ã© uma classe, no
caso de sistemas orientados a objetos. No entanto, nÃ£o precisamos ser
dogmÃ¡ticos e podemos considerar que certos testes vÃ£o testar um
<strong>conjunto de classes</strong>. O fundamental Ã© que tais testes
atendam aos princÃ­pios FIRST, principalmente aqueles associados Ã s trÃªs
primeiras letras: rÃ¡pidos, independentes e repetÃ­veis (ou
determinÃ­sticos). Mais detalhes sobre esses princÃ­pios na SeÃ§Ã£o 8.3.1 do
<a href="../cap8.html#princ%C3%ADpios-first">CapÃ­tulo 8</a>.</p>
<h3 class="unnumbered"
id="no-contexto-de-testes-o-que-significam-os-termos-falso-positivonegativo-e-verdadeiro-positivonegativo">3.
No contexto de testes, o que significam os termos falso
positivo/negativo e verdadeiro positivo/negativo? <a
href="#no-contexto-de-testes-o-que-significam-os-termos-falso-positivonegativo-e-verdadeiro-positivonegativo"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Seguem as definiÃ§Ãµes:</p>
<ul>
<li>Falso positivo: um teste que falha, embora o cÃ³digo testado esteja
correto.</li>
<li>Falso negativo: um teste que passa, apesar de o cÃ³digo testado ter
um bug.</li>
<li>Verdadeiro positivo: um teste que falha e o cÃ³digo testado, de fato,
tem um bug.</li>
<li>Verdadeiro negativo: um teste que passa e o cÃ³digo testado, de fato,
estÃ¡ correto.</li>
</ul>
<p>Ou seja, com testes, sempre almejamos obter verdadeiro positivos ou
negativos. Um falso positivo indica um bug nos nossos testes. Por fim,
um falso negativo indica que deixamos de testar entradas que levariam o
programa a falhar.</p>
<p>Ainda para ficar mais claro:</p>
<ul>
<li>verdadeiro = teste cujo resultado Ã© confiÃ¡vel</li>
<li>falso = teste cujo resultado nÃ£o Ã© confiÃ¡vel</li>
<li>positivo = teste que falha, isto Ã©, emite um <q>alerta</q></li>
<li>negativo = teste que passa</li>
</ul>
<h3 class="unnumbered"
id="por-que-nÃ£o-usam-o-termo-dublÃª-de-testes-no-livro">4. Por que nÃ£o
usam o termo dublÃª de testes no livro? <a
href="#por-que-nÃ£o-usam-o-termo-dublÃª-de-testes-no-livro"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Reconhecemos que <strong>dublÃª</strong> Ã© um termo usado por diversos
autores, desde que foi descrito no livro do Gerard Meszaros (<em>xUnit
Test Patterns</em>).</p>
<p>PorÃ©m, achamos que mock Ã© um termo mais comum, principalmente entre
ferramentas de teste. Veja alguns exemplos:</p>
<ul>
<li><p><em>Jest uses a custom resolver for imports in your tests, making
it simple to <strong>mock any object</strong> outside of your testâ€™s
scope.</em></p></li>
<li><p><em>Mockito is a <strong>mocking framework</strong> that tastes
really good.</em></p></li>
<li><p><em>unittest.mock â€¦ allows you to replace parts of your system
under test with <strong>mock objects</strong>.</em></p></li>
</ul>
<p>Ou seja, para ficarmos alinhados com a documentaÃ§Ã£o dessas
ferramentas, preferimos adotar o termo mock.</p>
<p>AlÃ©m disso, achamos que a diferenÃ§a entre os vÃ¡rios tipos de dublÃªs
nÃ£o Ã© intuitiva, nem auto-explicativa. Ou seja, nÃ£o Ã© tÃ£o simples
lembrar, no dia a dia, a caracterÃ­stica distintiva de um spy, stub,
dummy, fake, etc.</p>
<p>Por outro lado, Ã© importante ressaltar que acrescentamos, no livro,
uma nota explicando o conceito de dublÃªs e seus diferentes tipos.</p>
<h3 class="unnumbered" id="precisamos-testar-mÃ©todos-privados">5.
Precisamos testar mÃ©todos privados? <a
href="#precisamos-testar-mÃ©todos-privados" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h3>
<p>NÃ£o, pois eles vÃ£o ser testados quando testarmos os mÃ©todos pÃºblicos
da classe. Em outras palavras, o foco deve ser testar os mÃ©todos
pÃºblicos. Por tabela, isso vai garantir que os mÃ©todos privados tambÃ©m
estÃ£o funcionando.</p>
<h3 class="unnumbered"
id="como-testar-mÃ©todos-que-tÃªm-efeito-colateral">6. Como testar mÃ©todos
que tÃªm efeito colateral? <a
href="#como-testar-mÃ©todos-que-tÃªm-efeito-colateral" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h3>
<p>Primeiro, uma rÃ¡pida definiÃ§Ã£o de efeito colateral: o termo designa
mÃ©todos cuja execuÃ§Ã£o nÃ£o apenas retorna um valor, mas tambÃ©m altera o
contexto de execuÃ§Ã£o. Por exemplo, um mÃ©todo tem um efeito colateral
quando ele altera o valor de um atributo do seu objeto ou de uma
variÃ¡vel global, salva um valor em algum arquivo, envia um mail,
etc.</p>
<p>Voltando Ã  pergunta, temos duas possÃ­veis respostas:</p>
<ul>
<li>Testar se o efeito colateral ocorreu</li>
<li>Implementar um teste comportamental ou de interaÃ§Ã£o</li>
</ul>
<p>Vamos explicar cada um desses casos a seguir.</p>
<h5 class="unnumbered" id="teste-do-efeito-colateral">Teste do efeito
colateral <a href="#teste-do-efeito-colateral" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h5>
<p>Suponha um mÃ©todo <code>push()</code> que altera o estado da sua
pilha, para incluir mais um item. Nesse caso, podemos usar um outro
mÃ©todo, do prÃ³prio objeto, para testar se o efeito colateral desejado
ocorreu. Por exemplo, um mÃ©todo <code>size()</code>, que retorna o
tamanho da pilha, pode ajudar. Veja um exemplo:</p>
<pre><code>void testeEmpilhaStack() {
  Stack stack = new Stack();
  stack.push(10);
  stack.push(20);
  stack.push(30);
  int size = stack.size();
  assertEquals(3,size);
}</code></pre>
<p>Veja que o mÃ©todo <code>push</code> retorna <code>void</code>. Ou
seja, realmente, nÃ£o conseguimos testar um <code>push</code> de forma
usual: isto Ã©, chamando-o e verificando se o valor que ele retorna Ã©
aquele esperado.</p>
<h5 class="unnumbered" id="teste-comportamental-ou-de-interaÃ§Ã£o">Teste
comportamental (ou de interaÃ§Ã£o) <a
href="#teste-comportamental-ou-de-interaÃ§Ã£o" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h5>
<p>Suponha agora que um mÃ©todo envia um mail, que chega na caixa postal
de um outro processo. Normalmente, nÃ£o Ã© fÃ¡cil contactar esse processo
para testar se a mensagem, de fato, chegou. Uma possÃ­vel soluÃ§Ã£o
consiste em usar um mock e realizar um tipo de teste chamado de
<strong>teste comportamental</strong> ou <strong>teste de
interaÃ§Ã£o</strong>. Isto Ã©, testamos se a execuÃ§Ã£o do mÃ©todo sob teste
chamou algum mÃ©todo de interesse. No nosso caso, devemos testar se essa
execuÃ§Ã£o chamou o mÃ©todo que produz o efeito colateral que nos interessa
(o envio de um mail). Veja um exemplo (retirado da SeÃ§Ã£o 8.6.2 do <a
href="../cap8.html#mocks-vs-stubs">CapÃ­tulo 8</a> do livro)</p>
<pre><code>void testeEnvioDeMensagem {
  SomeObject obj = new SomeObject();    
  Mailer m = mock(Mailer.class);
  obj.someBusinessLogic(m);
  verify(m).send(anyString());
}</code></pre>
<p>No teste acima, nÃ£o testamos o efeito colateral (isto Ã©, se a
mensagem chegou no destino), mas sim se o mÃ©todo <code>send</code>,
responsÃ¡vel por enviar a mensagem, foi chamado durante a execuÃ§Ã£o de
<code>someBusinessLogic</code>.</p>
<p>Antes de concluir, gostarÃ­amos de mencionar que testes de interaÃ§Ã£o,
como o mostrado acima, sÃ£o mais frÃ¡geis, pois eles estÃ£o acoplados a
detalhes da implementaÃ§Ã£o interna do mÃ©todo que estÃ¡ sendo testado.</p>
<h3 class="unnumbered"
id="como-testar-mÃ©todos-que-nÃ£o-tÃªm-efeito-colateral">7. Como testar
mÃ©todos que nÃ£o tÃªm efeito colateral? <a
href="#como-testar-mÃ©todos-que-nÃ£o-tÃªm-efeito-colateral"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Normalmente, esses sÃ£o os mÃ©todos fÃ¡ceis de serem testados: eles
recebem alguns parÃ¢metros, processam eles e retornam um resultado, sem
alterar absolutamente nada do ambiente de execuÃ§Ã£o. Veja um exemplo:</p>
<pre><code>public void testeMetodoSemEfeitoColateral() {
  String s = &quot;smiles&quot;;
  assertTrue(s.endsWith(&quot;miles&quot;));
}
</code></pre>
<p>Testes como o acima, que apenas verificam o resultado do mÃ©todo
chamado â€” ou, no mÃ¡ximo, o estado de alguma outra estrutura de dados do
sistema â€” sÃ£o chamados de <strong>testes de estado</strong>.</p>
<h3 class="unnumbered"
id="quando-preciso-criar-um-mock-para-uma-dependÃªncia">8. Quando preciso
criar um mock para uma dependÃªncia? <a
href="#quando-preciso-criar-um-mock-para-uma-dependÃªncia"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Suponha que temos que testar um mÃ©todo <code>f</code> da seguinte
classe:</p>
<pre><code>class A {
 
  private D d;   
 
  A(D d) {
    this.d = d;
  } 
 
  public int f(...) {  
    ...
  }
}</code></pre>
<p>A classe <code>A</code> possui uma dependÃªncia <code>d</code> para o
tipo <code>D</code>. Quando precisamos criar um mock para essa
dependÃªncia?</p>
<ul>
<li><p>Quando <code>D</code> Ã© um serviÃ§o lento, como um banco de
dados.</p></li>
<li><p>Quando nÃ£o Ã© trivial instanciar um objeto do tipo <code>D</code>.
Por exemplo, a construtora de <code>D</code> pode exigir como parÃ¢metro
um objeto do tipo <code>E</code>; por sua vez, a construtora de
<code>E</code> pode exigir um objeto do tipo <code>F</code> e assim por
diante.</p></li>
<li><p>Quando <code>D</code> Ã© um serviÃ§o nÃ£o-determinÃ­stico. Por
exemplo, <code>D</code> Ã© um serviÃ§o financeiro cujo resultado varia com
a cotaÃ§Ã£o do dÃ³lar.</p></li>
<li><p>Quando a execuÃ§Ã£o de um mÃ©todo de <code>D</code> for importante
para o teste, conforme vimos no teste comportamental da pergunta 4.
Nesse teste, <code>D</code> Ã© o tipo <code>Mailer</code>e precisamos
testar se a execuÃ§Ã£o de <code>f</code> vai enviar um mail.</p></li>
</ul>
<h3 class="unnumbered"
id="como-criar-um-mock-para-uma-dependÃªncia-privada">9. Como criar um
mock para uma dependÃªncia privada? <a
href="#como-criar-um-mock-para-uma-dependÃªncia-privada"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Se a dependÃªncia for configurÃ¡vel por meio do construtor da classe ou
de um mÃ©todo <code>set</code> nÃ£o existe problema.</p>
<p>PorÃ©m, se a dependÃªncia nÃ£o for configurÃ¡vel de fora da classe, aÃ­
sim temos um problema. Nesse caso, a Ãºnica soluÃ§Ã£o Ã© expor essa
dependÃªncia de forma a permitir a sua configuraÃ§Ã£o pelo teste.
Evidentemente, isso pode quebrar o encapsulamento da classe, mas nÃ£o
existe outra soluÃ§Ã£o.</p>
<h3 class="unnumbered"
id="em-qual-pacote-ou-mÃ³dulo-ou-diretÃ³rio-devo-colocar-os-testes">10. Em
qual pacote (ou mÃ³dulo, ou diretÃ³rio) devo colocar os testes? <a
href="#em-qual-pacote-ou-mÃ³dulo-ou-diretÃ³rio-devo-colocar-os-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Tipicamente, na maioria das linguagens, os testes ficam em um
diretÃ³rio separado, apenas com o cÃ³digo de testes.</p>
<p>Veja o exemplo do sistema <code>google/guava</code>:</p>
<ul>
<li>As classes e pacotes do sistema ficam em
<code>src/com/google/common</code>.</li>
<li>Os respectivos testes ficam em
<code>test/com/google/common</code>.</li>
</ul>
<h3 class="unnumbered"
id="com-que-frequÃªncia-devemos-rodar-os-testes">11. Com que frequÃªncia
devemos rodar os testes? <a
href="#com-que-frequÃªncia-devemos-rodar-os-testes" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h3>
<p>Basicamente, essa resposta depende do tipo de teste!</p>
<p>Por um lado, testes de unidade devem ser executados com grande
frequÃªncia. Por exemplo, sempre que compilar o cÃ³digo, nada impede que
vocÃª tambÃ©m execute tais testes. Veja que, por definiÃ§Ã£o, testes de
unidade rodam rapidamente.</p>
<p>No outro extremo, temos os testes de sistema ou testes end-to-end, os
quais devem ser executados com uma frequÃªncia muito menor. Por exemplo,
os autores do livro Software Engineering at Google afirmam o
seguinte:</p>
<blockquote>
<p>Os times no Google frequentemente isolam os testes maiores,
executando-os somente durante o processo de build e de release, de forma
a nÃ£o impactar o fluxo de trabalho dos desenvolvedores.</p>
</blockquote>
<p>No meio do caminho, temos os testes de integraÃ§Ã£o. Alguns deles
costumam rodar rÃ¡pido, em alguns minutos. PorÃ©m, sabemos que existem
tambÃ©m testes de integraÃ§Ã£o que levam horas para rodar, o que
inviabiliza a sua execuÃ§Ã£o frequente.</p>
<h3 class="unnumbered"
id="quais-testes-devem-ser-rodados-por-um-servidor-de-integraÃ§Ã£o-contÃ­nua-ci">12.
Quais testes devem ser rodados por um servidor de IntegraÃ§Ã£o ContÃ­nua
(CI)? <a
href="#quais-testes-devem-ser-rodados-por-um-servidor-de-integraÃ§Ã£o-contÃ­nua-ci"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>A resposta para essa pergunta Ã© uma consequÃªncia da resposta da
pergunta anterior. Basicamente, ela Ã© a seguinte:</p>
<ul>
<li><p>Testes de unidade: com certeza, devem ser executados por um
servidor de CI.</p></li>
<li><p>Testes de sistema, testes end-to-end ou testes de requisitos nÃ£o
funcionais (tais como testes de performance): normalmente, como sÃ£o
testes mais lentos, eles nÃ£o sÃ£o incluÃ­dos no serviÃ§o de CI.</p></li>
<li><p>Testes de integraÃ§Ã£o: aqui a resposta varia, pois existem testes
de integraÃ§Ã£o que rodam rÃ¡pido (por exemplo, em alguns minutos) ou que
levam bem mais tempo para rodar. EntÃ£o, se o teste de integraÃ§Ã£o rodar
dentro de um limite de tempo razoÃ¡vel, ele pode ser sim incluÃ­do no
serviÃ§o de CI.</p></li>
</ul>
<h3 class="unnumbered" id="para-que-servem-suÃ­tes-de-testes">13. Para
que servem suÃ­tes de testes? <a href="#para-que-servem-suÃ­tes-de-testes"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Uma suÃ­te de testes Ã© um conjunto de testes que pretendemos rodar
juntos. Por exemplo, podemos optar por particionar os testes de um dado
sistema em duas suÃ­tes: a primeira com os testes rÃ¡pidos e que serÃ£o
executados com frequÃªncia; e a segunda com testes que demoram mais tempo
e que, por isso mesmo, queremos rodar mais raramente.</p>
<h3 class="unnumbered" id="o-que-Ã©-um-teste-de-fumaÃ§a-smoke-test">14. O
que Ã© um teste de fumaÃ§a (smoke test)? <a
href="#o-que-Ã©-um-teste-de-fumaÃ§a-smoke-test" class="anchor-link"
aria-hidden="true">ğŸ”—</a></h3>
<p>Ã‰ um teste de sistema, porÃ©m rÃ¡pido e superficial. O objetivo Ã©
garantir que nÃ£o existe um erro grave no funcionamento do sistema. Ou
seja, se nÃ£o existe um <q>incÃªndio</q> (ou problema) de grandes
proporÃ§Ãµes e que estÃ¡ gerando uma grande quantidade de <q>fumaÃ§a</q>.
Por exemplo, um teste de fumaÃ§a pode verificar se algumas telas da
aplicaÃ§Ã£o estÃ£o abrindo ou se determinadas APIs respondem a solicitaÃ§Ãµes
bÃ¡sicas. Mas, complementando, um teste de fumaÃ§a Ã© um teste
automÃ¡tico.</p>
<p>Veja a descriÃ§Ã£o do teste de fumaÃ§a de uma aplicaÃ§Ã£o:</p>
<blockquote>
<p>O nosso teste gera uma requisiÃ§Ã£o HTTP para cada pÃ¡gina da aplicaÃ§Ã£o
e entÃ£o testamos se o cÃ³digo de resposta HTTP retornado estÃ¡ correto.
Embora nÃ£o seja nada sofisticado, ele nos permite responder uma questÃ£o
essencial: a aplicaÃ§Ã£o estÃ¡ rodando?</p>
</blockquote>
<h3 class="unnumbered" id="o-que-Ã©-um-teste-de-snapshot">15. O que Ã© um
teste de snapshot? <a href="#o-que-Ã©-um-teste-de-snapshot"
class="anchor-link" aria-hidden="true">ğŸ”—</a></h3>
<p>Esses testes sÃ£o usados para testar a saÃ­da de componentes visuais,
como, por exemplo, componentes implementados usando-se frameworks como
React, Vue.js, etc.</p>
<p>Na definiÃ§Ã£o acima, o termo saÃ­da refere-se ao leiaute do componente,
conforme definido, por exemplo, por um fragmento de cÃ³digo em HTML ou
JSON.</p>
<p>Um teste de snapshot funciona entÃ£o assim:</p>
<ul>
<li><p>Na primeira vez que o teste for executado, ele simplesmente vai
renderizar o componente que estÃ¡ sendo testado e obter a sua saÃ­da em
HTML. Essa saÃ­da textual Ã© chamada de snapshot e serÃ¡ gravada em um
arquivo especÃ­fico.</p></li>
<li><p>Nas execuÃ§Ãµes seguintes, o teste renderiza de novo o componente
que estÃ¡ sendo testado e compara o seu leiaute atual com o snapshot
gravado em disco. Se os dois arquivos forem iguais, o teste vai passar.
Caso contrÃ¡rio, o teste vai falhar e serÃ¡ mostrado o diff dos
arquivos.</p></li>
</ul>
<p>Em caso de falha, o framework de teste oferece um comando para
resetar, isto Ã©, apagar o snapshot. Feito isso, o processo acima se
repete.</p>
<p>A principal vantagem de testes de snapshot Ã© que eles podem ser
implementados de forma simples, por meio de pequenos trechos de cÃ³digo.
Por outro lado, a principal desvantagem Ã© a sua fragilidade, pois mesmo
pequenas mudanÃ§as no leiaute de uma pÃ¡gina resultam em falsos
positivos.</p>
<p>Por isso, alguns desenvolvedores consideram que testes de snapshot,
na verdade, geram <em>warnings</em> que alertam sobre mudanÃ§as na
apresentaÃ§Ã£o de um componente. Esses warnings devem ser analisados para
comprovar se, de fato, eles representam regressÃµes ou nÃ£o. Se nÃ£o
representarem, os defensores de testes de snapshot argumentam que o
processo de resetar os snapshots Ã© simples e rÃ¡pido.</p>
<hr />
<p>Voltar para a lista de <a href="./artigos.html">artigos</a>.</p>
</div>
</div>
</div>

<footer>
Direitos autorais reservados. VersÃ£o para uso pessoal.
Para reportar quaisquer erros, incluindo pequenos erros de ortografia, use este <a href="https://forms.gle/KbzvMx5RLnqPR7uq7">formulÃ¡rio</a>.
</footer>
</body>
</html>
